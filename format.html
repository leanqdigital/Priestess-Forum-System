<div class="flex w-full items-start gap-2" data-comment-id="{{:id}}">
    <div class="size-6">
        <img src="{{:author.profileImage}}" alt="{{:author.name}}" onerror="this.src='{{:defaultAuthorImage}}'"
            class="size-full rounded-full object-cover" />
    </div>
    <div class="flex flex-col gap-2 w-full">
        <div class="flex w-full flex-col gap-2 rounded bg-primary p-2">
            <div class="flex items-center justify-between">
                <h4 class="text-white">{{:author.name}}</h4>
                <div x-data="{ editDeletePost: false, openedWithKeyboard: false }" class="relative w-fit"
                    x-on:keydown.esc.window="editDeletePost = false, openedWithKeyboard = false">
                    <div class="size-4 cursor-pointer" x-on:click="editDeletePost = ! editDeletePost"
                        aria-haspopup="true" x-on:keydown.space.prevent="openedWithKeyboard = true"
                        x-on:keydown.enter.prevent="openedWithKeyboard = true"
                        x-on:keydown.down.prevent="openedWithKeyboard = true"
                        x-bind:class="editDeletePost || openedWithKeyboard ? 'text-on-surface-strong dark:text-on-surface-dark-strong' : 'text-on-surface dark:text-on-surface-dark'"
                        x-bind:aria-expanded="editDeletePost || openedWithKeyboard">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M8.66666 7.99998C8.66666 8.19776 8.60801 8.3911 8.49813 8.55555C8.38824 8.72 8.23207 8.84817 8.04934 8.92386C7.86661 8.99955 7.66555 9.01935 7.47157 8.98076C7.27759 8.94218 7.0994 8.84694 6.95955 8.70709C6.8197 8.56723 6.72446 8.38905 6.68587 8.19507C6.64729 8.00109 6.66709 7.80002 6.74278 7.6173C6.81847 7.43457 6.94664 7.27839 7.11109 7.16851C7.27554 7.05863 7.46888 6.99998 7.66666 6.99998C7.93187 6.99998 8.18623 7.10534 8.37376 7.29287C8.5613 7.48041 8.66666 7.73476 8.66666 7.99998ZM7.66666 3.33331C7.86444 3.33331 8.05778 3.27466 8.22223 3.16478C8.38668 3.0549 8.51485 2.89872 8.59054 2.716C8.66622 2.53327 8.68603 2.3322 8.64744 2.13822C8.60886 1.94424 8.51362 1.76606 8.37376 1.62621C8.23391 1.48635 8.05573 1.39111 7.86175 1.35253C7.66777 1.31394 7.4667 1.33375 7.28397 1.40943C7.10125 1.48512 6.94507 1.61329 6.83519 1.77774C6.72531 1.94219 6.66666 2.13553 6.66666 2.33331C6.66666 2.59853 6.77201 2.85288 6.95955 3.04042C7.14709 3.22796 7.40144 3.33331 7.66666 3.33331ZM7.66666 12.6666C7.46888 12.6666 7.27554 12.7253 7.11109 12.8352C6.94664 12.9451 6.81847 13.1012 6.74278 13.284C6.66709 13.4667 6.64729 13.6678 6.68587 13.8617C6.72446 14.0557 6.8197 14.2339 6.95955 14.3738C7.0994 14.5136 7.27759 14.6088 7.47157 14.6474C7.66555 14.686 7.86661 14.6662 8.04934 14.5905C8.23207 14.5148 8.38824 14.3867 8.49813 14.2222C8.60801 14.0578 8.66666 13.8644 8.66666 13.6666C8.66666 13.4014 8.5613 13.1471 8.37376 12.9595C8.18623 12.772 7.93187 12.6666 7.66666 12.6666Z"
                                fill="white" />
                        </svg>
                    </div>
                    <div x-cloak x-show="editDeletePost || openedWithKeyboard" x-transition x-trap="openedWithKeyboard"
                        x-on:click.outside="editDeletePost = false, openedWithKeyboard = false"
                        x-on:keydown.down.prevent="$focus.wrap().next()"
                        x-on:keydown.up.prevent="$focus.wrap().previous()"
                        class="absolute -top-[100%] right-0 z-[999] flex w-[100px] flex-col rounded bg-[#084D55] p-1 shadow-[0px_4px_4px_0px_#0000000F]">
                        <button type="button" data-post-id="{{:id}}"
                            class="edit-post-btn hover:bg-primary-100 o3 cursor-pointer rounded p-[10px] text-left text-white transition-all">Edit</button>
                        <button type="button" data-post-id="{{:id}}"
                            class="delete-comment-btn hover:bg-primary-100 o3 cursor-pointer rounded p-[10px] text-left text-white transition-all"
                            data-comment-id="{{:id}}">Delete</button>
                    </div>
                </div>
            </div>
            <div class="p3 text-white">{{:content}}</div>
            <div class="flex w-full items-center justify-between">
                <div class="flex items-center gap-6 max-[500px]:gap-3">
                    <div class="flex cursor-pointer items-center gap-2">
                        <button class="vote-button" data-comment-id="{{:id}}">
                            {{if isCommentVoted}}
                            <!-- Filled heart -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="#C29D68"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M22 8.18423C22.0015 8.8644 21.8682 9.53811 21.6076 10.1664C21.3471 10.7947 20.9646 11.3651 20.4823 11.8446L12.5097 19.9351C12.4432 20.0025 12.364 20.0561 12.2766 20.0927C12.1893 20.1293 12.0955 20.1481 12.0008 20.1481C11.9061 20.1481 11.8123 20.1293 11.725 20.0927C11.6376 20.0561 11.5584 20.0025 11.4919 19.9351L3.51935 11.8446C2.54736 10.8738 2.00084 9.55668 2 8.18292C1.99916 6.80916 2.54408 5.49134 3.51489 4.51935C4.48569 3.54736 5.80285 3.00084 7.17661 3C8.55037 2.99916 9.8682 3.54409 10.8402 4.51489L12.0008 5.59962L13.1695 4.51132C13.8948 3.78958 14.8177 3.29892 15.8217 3.10128C16.8257 2.90364 17.8657 3.00788 18.8104 3.40085C19.7552 3.79381 20.5624 4.45788 21.1301 5.30922C21.6977 6.16055 22.0004 7.16099 22 8.18423Z" />
                            </svg>
                            {{else}}
                            <!-- Outline heart -->
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M20.5087 4.49572C19.5548 3.54375 18.2625 3.0085 16.9149 3.00713C15.5672 3.00577 14.2739 3.53841 13.3181 4.48844L12.0022 5.71353L10.6862 4.48844C9.7311 3.53456 8.4362 2.99915 7.08635 3C5.7365 3.00085 4.44227 3.5379 3.48838 4.49299C2.5345 5.44808 1.99909 6.74298 1.99994 8.09283C2.00079 9.44269 2.53784 10.7369 3.49293 11.6908L11.6141 19.9301C11.6648 19.9815 11.7252 20.0223 11.7919 20.0501C11.8585 20.078 11.93 20.0923 12.0022 20.0923C12.0744 20.0923 12.1458 20.078 12.2125 20.0501C12.2791 20.0223 12.3395 19.9815 12.3902 19.9301L20.5087 11.6944C20.9814 11.2218 21.3565 10.6607 21.6124 10.0431C21.8682 9.42552 21.9999 8.76357 21.9999 8.09507C21.9999 7.42658 21.8682 6.76463 21.6124 6.14704C21.3565 5.52946 20.9814 4.96833 20.5087 4.49572ZM19.7344 10.9256L12.0022 18.7705L4.26724 10.9229C3.52168 10.1721 3.10407 9.15642 3.10588 8.09835C3.10768 7.04028 3.52875 6.02606 4.27686 5.27783C5.02497 4.5296 6.03913 4.10837 7.0972 4.10639C8.15526 4.10442 9.17099 4.52187 9.92188 5.2673C9.92626 5.27204 9.93114 5.27631 9.93642 5.28002L11.6305 6.85772C11.7314 6.95176 11.8642 7.00405 12.0022 7.00405C12.1401 7.00405 12.2729 6.95176 12.3739 6.85772L14.0679 5.27911C14.0732 5.2754 14.0781 5.27114 14.0824 5.26639C14.4535 4.89313 14.8946 4.59679 15.3804 4.39436C15.8662 4.19194 16.3873 4.08741 16.9136 4.08678C17.4399 4.08615 17.9611 4.18942 18.4475 4.39068C18.9338 4.59194 19.3756 4.88722 19.7475 5.25959C20.1195 5.63196 20.4143 6.07409 20.615 6.56063C20.8157 7.04717 20.9184 7.56855 20.9171 8.09486C20.9159 8.62118 20.8108 9.14207 20.6078 9.62767C20.4049 10.1133 20.108 10.554 19.7344 10.9247V10.9256Z"
                                    fill="#C29D68" />
                            </svg>
                            {{/if}}
                        </button>
                        <div class="o1 text-white vote-count">{{:voteCommentCount}}</div>
                    </div>
                    <div class="o3 text-white">{{:date}}</div>
                </div>
            </div>
        </div>
        <!-- Add reply form -->
        <div
            class="reply-form flex items-center gap-3 w-full bg-primary-100 min-[500px]:rounded max-[500px]:p-4 z-[999] max-[500px]:fixed bottom-0 pb-6 right-0 w-full max-[500px]:bg-primary">
            <div id="reply-editor" class="editor reply-editor text-white p-2 w-full h-10 border border-gray-600 rounded"
                contenteditable="true"></div>
            <button id="submit-reply"
                class="w-fit bg-secondary text-white px-4 py-2 rounded hover:bg-secondary-200 transition-colors">Post</button>

            <div id="replies-container" class="space-y-4">
            </div>
        </div>
    </div>
</div>